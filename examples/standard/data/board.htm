<!doctype html><html lang='en'><head><meta charset='utf-8'><meta name='viewport'content='width=device-width,initial-scale=1'><title>Board</title><link rel='icon'type='image/png'href='/favicon48.png'sizes='48x48'><meta name='application-name'content='Ding'><meta name='msapplication-config'content='/browserconfig.xml'><meta name='msapplication-TileColor'content='#2b5797'><meta name='msapplication-TileImage'content='/favicon144.png'><link rel='apple-touch-icon'sizes='180x180'href='/favicon180.png'><meta name='mobile-web-app-capable'content='yes'><link rel='manifest'href='/site.webmanifest'><meta name='theme-color'content='#ffffff'><link rel='icon'type='image/png'href='/favicon48.png'sizes='48x48'><link content-type='text/css'href='/iotstyle.css'rel='stylesheet'><style>svg.setconfig{position:absolute;top:.5rem;right:.5rem;height:1.4rem;width:1.4rem;background-size:1.4rem}svg.fullscreen{position:absolute;top:.5rem;right:2.5rem;height:1.4rem;width:1.4rem;background-size:1.4rem}.panel,img{user-select:none}input:invalid,select:invalid{border-color:red}</style><script src='/micro.js'></script></head><body><div class='u-header'><h1>Board</h1></div><div class='u-navbar'><a href='/'>Home</a> <a href='/board.htm'>Board</a> <a href='/microide.htm'>IDE</a> <a href='/log.htm'>Log</a> <span class='gap'></span> <button id='sysButton'>sys</button> <button id='addButton'>+</button></div><main class='panel'></main><div id='u-templates'style='display:none'><div u-control='modal'u-is='modal'><div class='modalBack'u-action='close'></div><div class='modalFrame'class='modal-object'></div></div><div class='cHead block header'><svg class='icon'><use href='./icons.svg#${type}'/></svg><h3 u-text='title'></h3><h4 u-text='description'></h4><svg class='setconfig'><use href='./icons.svg#config'/></svg></div><div class='card'u-control='generic'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><div class='form-grid'><label>Value:</label><span u-text='value'></span></div></div></div><form method='dialog'class='card'u-control='schedule'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><span class='u-bool ux-value'u-active='value'style='top:2rem'></span><fieldset class='block btn-group'><legend>Mode</legend><label><input name='mode'u-value='mode'type='radio'value='off'>Off</label> <label><input name='mode'u-value='mode'type='radio'value='on'>On</label> <label><input name='mode'u-value='mode'type='radio'value='timer'>Timer</label></fieldset><div class='block'><div class='form-grid'><label>Start:</label><span u-text='ontime'></span> <label>End:</label><span u-text='offtime'></span></div></div></form><div class='card'u-control='dstime'id='${id}'u-is='dstime'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><div class='form-grid'><label>ReadTime:</label><input u-value='readtime'type='time'step='1'> <label>Now:</label><span u-text='now'></span> <label>set Time:</label><span class='now'></span></div><div class='block footer'><button style='float:right'>set</button></div></div></div><div class='card'u-control='switch'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><span class='u-bool ux-value border'u-active='value'></span><div u-is='input'><label class='down'>off</label> <input class='switch'u-value='value'type='range'> <label class='up'>on</label></div></div></div><div class='card'u-control='value'id='${id}'u-is='value'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block form-grid'><label>value:</label> <span u-is='input'><input type='range'u-value='value'><span u-text='value'></span></span></div></div><div class='card'u-control='logic'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><span class='u-bool ux-value'u-active='value'></span><div class='form-grid'><label>value:</label><span u-text='value'></span></div></div></div><div class='card'u-control='rfcodes'microid='${id}'u-is='generic'><div u-is='include'ref='.cHead'></div><div class='block Element'><div><label>Last Code:</label></div><pre>[<span u-text='value'style='user-select:text'></span>]</pre></div></div><div class='card'u-control='color'id='${id}'u-is='color'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block form-grid'><label>value:</label><output name='value'></output><label>color:</label><input type='color'name='color'> <label style='display:none'>white:</label><div style='display:none'><input type='range'max='255'name='white'><output name='white'></output></div><label>brightness:</label><div><input type='range'max='100'name='brightness'><output name='brightness'></output></div></div><div class='block footer form-actions'><button u-action='mode'value='fade'>fade</button> <button u-action='mode'value='fix'>fix</button> <button u-action='mode'value='pulse'>pulse</button> <button u-action='mode'value='wheel'>wheel</button></div></div><div class='card'u-control='light'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><span u-color='value'class='border'style='width:4rem;height:4rem;float:right;border-radius:50%'></span><div class='form-grid'><label>value:</label><output u-text='value'>xxx</output><label>brightness:</label><output u-text='brightness'></output></div></div></div><div class='card'u-control='tm1637'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><div style='text-align:center'><span u-text='value'style='font-size:4rem;font-style:italic'></span></div><div class='form-grid'><label>brightness:</label><span u-text='brightness'></span></div></div></div><div class='card'u-control='ina2xx'id='${id}'u-is='generic'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><div class='form-grid'><label>Voltage:</label><span u-text='voltage'></span></div><div class='form-grid'><label>Current:</label><span u-text='current'></span></div><div class='form-grid'><label>Power:</label><span u-text='power'></span></div></div></div><div class='card'u-control='bl0937'id='${id}'u-is='bl0937'microid='${id}'><div u-is='include'ref='.cHead'></div><div class='block'><table style='width:100%;font-size:2rem'><tr><td><span u-text='power'></span> W</td><td style='display:none'><span u-text='current'></span> mA</td><td style='display:none'><span u-text='voltage'></span> V</td></tr></table>mode: <button u-action='mode'value='current'>current</button> <button u-action='mode'value='voltage'>voltage</button></div></div><div class='card'u-control='scene'microid='${id}'u-is='scene'><div class='cHead block header'><svg class='icon'><use href='./icons.svg#scene'/></svg><h3>Scenes</h3></div><div class='block'></div></div></div><script>var updateTimer,panelObj=document.querySelector(".panel"),addObj=document.getElementById("addButton"),sysObj=document.getElementById("sysButton"),refreshState="",DEBUG_STARTTIME=Date.now(),REFRESH_IDLEINTERVALL=4e3,uElements={defs:{},impl:[],env:{},config:{}},params=getHashParams({sys:!1});window.addEventListener("hashchange",(function(){window.location.reload()})),sysObj.addEventListener("click",(function(e){params.sys=!toBool(params.sys),window.location.hash="sys="+params.sys})),addObj.addEventListener("click",(async function(e){document.querySelector("dialog#addElement")||await fetch("./board-new.htm").then((e=>e.text())).then((e=>{document.body.appendChild(document.createRange().createContextualFragment(e))})),DialogFormClass.openModalForm("addElement",{})}));var alias={sht20:"dht",displayssd1306:"displayoled",displaysh1106:"displayoled",neo:"color",my9291:"light",and:"logic",or:"logic",ina219:"ina2xx",ina226:"ina2xx"};function updateAsap(e){e||(e=50),"w"==refreshState&&(window.clearTimeout(updateTimer),refreshState=""),""==refreshState&&(refreshState="w",updateTimer=window.setTimeout((function(){refreshState="f",fetch("/$board").then((e=>e.json())).then((e=>hub.publishObj(e))).finally((()=>{refreshState="",updateAsap(REFRESH_IDLEINTERVALL)}))}),e))}async function fetchJSON(e,t){return fetch(e,t).then((e=>e.json()))}function init(){var e=micro.loadFile("/board-templates.htm"),t=fetchJSON("/elements.json").then((e=>uElements.defs=e)),n=fetchJSON("/env.json").then((e=>uElements.env=e)),a=fetchJSON("/config.json").then((e=>uElements.config=e));Promise.allSettled([e,t,n,a]).then((function(){if(uElements.env&&(hub.write("env",JSON.stringify(uElements.env)),hub.publishObj(uElements.env)),uElements.config){const n=uElements.config;for(var e in n)for(var t in n[e])n[e][t].title||(n[e][t].title=e+"/"+t);hub.write("config",JSON.stringify(n)),hub.publishObj(n)}fetchJSON("/$elements").then((e=>uElements.impl=e)),updateAsap()}))}hub.subscribe("/*/*",(function(e,t,n){if(e&&(e=e.toLowerCase(),!document.querySelector("[microID='"+e+"']"))){var a=e.split("/")[1],o={id:e,type:a,icon:a},i=uElements.defs[a];if(toBool(params.sys)||!i||0==toBool(i.sys)){i&&i.icon&&(o.icon=i.icon);var s=micro.insertTemplate(panelObj,a,o);s||(a=alias[a]||"generic",s=micro.insertTemplate(panelObj,a,o))}}})),hub.subscribe("/device/*?name",(function(e,t,n){document.title=n,document.querySelector("meta[name=application-name]").content=n})),window.addEventListener("DOMContentLoaded",init),window!==window.top&&(document.querySelector(".u-header").style.display="none",document.querySelector(".u-navbar").style.display="none")</script></body></html>